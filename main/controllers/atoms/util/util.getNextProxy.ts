import { HttpsProxyAgent } from "https-proxy-agent";

const ipList = [
  "49.254.11.243:22536",
  "49.254.208.47:10557",
  "121.126.116.66:13644",
  "125.7.143.245:20585",
  "115.144.84.189:15616",
  "115.144.249.124:19389",
  "121.126.116.69:11494",
  "115.144.173.210:12778",
  "121.126.131.172:15774",
  "115.144.84.186:19004",
  "121.126.116.71:21435",
  "115.144.249.125:27800",
  "49.254.88.169:23400",
  "49.254.88.175:27824",
  "121.126.116.68:13584",
  "49.254.208.40:22171",
  "121.126.255.93:12954",
  "115.144.249.121:27445",
  "121.126.131.168:17206",
  "121.126.255.95:28976",
  "124.198.125.80:27203",
  "121.126.116.64:20739",
  "125.7.157.140:11302",
  "125.7.143.243:16884",
  "121.126.255.88:14790",
  "115.144.249.120:18601",
  "49.254.88.173:25286",
  "121.126.131.175:11442",
  "115.144.8.28:17668",
  "49.254.88.171:21932",
  "124.198.125.82:15515",
  "115.144.8.27:11259",
  "115.144.84.187:15127",
  "125.7.143.242:11545",
  "125.7.157.142:19105",
  "115.144.173.209:21706",
  "125.7.143.244:29165",
  "124.198.125.87:11798",
  "121.126.255.92:12625",
  "115.144.8.25:17066",
  "125.7.143.241:20354",
  "115.144.8.24:18589",
  "124.198.125.81:13182",
  "121.126.116.70:29716",
  "115.144.84.185:10447",
  "121.126.255.94:22838",
  "121.126.131.170:22567",
  "49.254.88.174:16649",
  "115.144.8.30:12364",
  "115.144.84.190:23085",
  "124.198.125.83:29801",
  "49.254.208.41:24853",
  "115.144.249.127:24347",
  "49.254.208.42:25868",
  "115.144.8.29:14146",
  "49.254.11.246:22566",
  "125.7.157.143:19624",
  "49.254.11.242:29936",
  "49.254.208.45:15734",
  "115.144.173.214:24982",
  "121.126.116.65:18274",
  "49.254.88.168:29077",
  "115.144.84.188:27182",
  "121.126.255.89:20285",
  "115.144.173.211:21363",
  "49.254.11.244:11958",
  "121.126.131.171:25694",
  "125.7.143.246:23682",
  "49.254.88.172:15198",
  "49.254.11.240:16644",
  "49.254.11.245:15773",
  "121.126.255.91:20341",
  "49.254.208.46:14318",
  "115.144.173.213:15281",
  "125.7.157.141:15810",
  "121.126.116.67:12965",
  "115.144.173.208:12629",
  "115.144.8.31:26001",
  "49.254.208.44:25095",
  "49.254.208.43:29705",
  "115.144.84.184:23253",
  "125.7.143.240:19865",
  "121.126.131.169:17320",
  "121.126.131.174:16407",
  "124.198.125.85:27447",
  "49.254.11.247:19870",
  "115.144.8.26:27175",
  "121.126.131.173:24065",
  "49.254.11.241:20534",
  "115.144.84.191:18256",
  "124.198.125.84:10801",
  "125.7.143.247:13914",
  "49.254.88.170:20545",
  "115.144.173.215:27823",
  "115.144.249.123:14994",
  "115.144.249.122:14986",
  "115.144.249.126:16187",
  "124.198.125.86:12095",
  "115.144.173.212:14370",
  "121.126.255.90:11636",
];

let currentIndex = 0;

export function utilGetNextProxy() {
  const [host, port] = ipList[currentIndex].split(":");

  currentIndex = (currentIndex + 1) % ipList.length;

  const proxyUrl = `http://${host}:${port}`;

  const proxyAgent = new HttpsProxyAgent(proxyUrl);

  return proxyAgent;
}

export function utilGetNextProxyForPlaywright({ isProxy }) {
  if (!isProxy) return;
  const [host, port] = ipList[currentIndex].split(":");

  currentIndex = (currentIndex + 1) % ipList.length;

  return {
    server: `http://${host}:${port}`,
    // 필요한 경우 인증 정보 추가
    // username: 'username',
    // password: 'password',
  };
}
